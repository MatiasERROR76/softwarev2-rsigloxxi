{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\diego.a.flores.roman\\\\Desktop\\\\qqq\\\\pruebajojo\\\\src\\\\components\\\\Pedidos.js\";\nimport React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheckToSlot, faBellConcierge } from '@fortawesome/free-solid-svg-icons';\nimport { ApiDePedidos } from '../services/apirest';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport HeaderPedidos from '../template/HeaderPedidos';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io('https://siglo-xxi-orders.azurewebsites.net'); //ESTA PANTALLA ES COCINA\n\nclass Pedidos extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      order_details: []\n    };\n  }\n\n  clickPedidos(id) {// this.props.history.push(\"/pedidos/\"+id);\n  }\n\n  componentDidMount() {\n    let url = ApiDePedidos;\n    axios.get(url).then(response => {\n      this.setState({\n        order_details: response.data.order_details\n      });\n    });\n\n    const listener = data => {\n      const orders = this.state.order_details;\n      orders.push(data);\n      this.setState({\n        order_details: orders\n      });\n    };\n\n    socket.on('orderDetails', listener);\n    return () => socket.off('orderDetails', listener);\n  }\n\n  tomarPedido(id) {\n    let url = 'https://siglo-xxi-orders.azurewebsites.net/Orders/v1/details/' + id + '/take-order';\n    axios.put(url).then(response => {\n      const orders = this.state.order_details;\n\n      for (const order of orders) {\n        if (order.id === id) {\n          order.status.name = 'EN PREPARACIÓN';\n        }\n      }\n\n      this.setState({\n        order_details: orders\n      });\n    }).catch(error => console.log(error.response.data));\n  }\n\n  entregarPedido(id) {\n    let url = 'https://siglo-xxi-orders.azurewebsites.net/Orders/v1/details/' + id + '/deliver';\n    axios.put(url).then(response => {\n      const newOrder_details = this.state.order_details.filter(order_details => order_details.id !== id);\n      this.setState({\n        order_details: newOrder_details\n      });\n    }).catch(error => console.log(error.response.data));\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(HeaderPedidos, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          id: \"customers\",\n          className: \"table table-striped\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Nombre de men\\xFA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Cantidad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Estado\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"N\\xFAmero de orden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"N\\xFAmero de mesa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Tomar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Entregar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.state.order_details.map((value, index) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: value.menu.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: value.quantity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: value.status.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: value.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: value.table.number\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"btn btn-primary\",\n                    onClick: () => this.tomarPedido(value.id),\n                    children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                      icon: faBellConcierge\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 108,\n                      columnNumber: 25\n                    }, this), \"Tomar\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"btn btn-success\",\n                    onClick: () => this.entregarPedido(value.id),\n                    children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                      icon: faCheckToSlot\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 25\n                    }, this), \"Entregar\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Pedidos;","map":{"version":3,"names":["React","Component","FontAwesomeIcon","faCheckToSlot","faBellConcierge","ApiDePedidos","axios","io","HeaderPedidos","socket","Pedidos","state","order_details","clickPedidos","id","componentDidMount","url","get","then","response","setState","data","listener","orders","push","on","off","tomarPedido","put","order","status","name","catch","error","console","log","entregarPedido","newOrder_details","filter","render","map","value","index","menu","quantity","table","number"],"sources":["C:/Users/diego.a.flores.roman/Desktop/qqq/pruebajojo/src/components/Pedidos.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport {\r\n  faCheckToSlot,\r\n  faBellConcierge\r\n} from '@fortawesome/free-solid-svg-icons'\r\nimport { ApiDePedidos } from '../services/apirest'\r\nimport axios from 'axios'\r\nimport io from 'socket.io-client'\r\nimport HeaderPedidos from '../template/HeaderPedidos'\r\nconst socket = io('https://siglo-xxi-orders.azurewebsites.net')\r\n\r\n\r\n\r\n//ESTA PANTALLA ES COCINA\r\nclass Pedidos extends Component {\r\n  state = {\r\n    order_details: []\r\n  }\r\n\r\n  clickPedidos(id) {\r\n    // this.props.history.push(\"/pedidos/\"+id);\r\n  }\r\n\r\n  componentDidMount() {\r\n    let url = ApiDePedidos\r\n    axios.get(url).then((response) => {\r\n      this.setState({\r\n        order_details: response.data.order_details\r\n      })\r\n    })\r\n    const listener = (data) => {\r\n      const orders = this.state.order_details\r\n      orders.push(data)\r\n      this.setState({\r\n        order_details: orders\r\n      })\r\n    }\r\n    socket.on('orderDetails', listener)\r\n    return () => socket.off('orderDetails', listener)\r\n  }\r\n\r\n  tomarPedido(id) {\r\n    let url =\r\n      'https://siglo-xxi-orders.azurewebsites.net/Orders/v1/details/' + id + '/take-order'\r\n    axios\r\n      .put(url)\r\n      .then((response) => {\r\n        const orders = this.state.order_details\r\n        for (const order of orders) {\r\n          if (order.id === id) {\r\n            order.status.name = 'EN PREPARACIÓN'\r\n          }\r\n        }\r\n        this.setState({ order_details: orders })\r\n      })\r\n      .catch((error) => console.log(error.response.data))\r\n  }\r\n\r\n  entregarPedido(id) {\r\n    let url =\r\n      'https://siglo-xxi-orders.azurewebsites.net/Orders/v1/details/' + id + '/deliver'\r\n    axios\r\n      .put(url)\r\n      .then((response) => {\r\n        const newOrder_details = this.state.order_details.filter(\r\n          (order_details) => order_details.id !== id\r\n        )\r\n        this.setState({ order_details: newOrder_details })\r\n      })\r\n      .catch((error) => console.log(error.response.data))\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <HeaderPedidos></HeaderPedidos>\r\n        <div className='container'>\r\n          <br></br>\r\n\r\n          <table id='customers' className='table table-striped'>\r\n            <thead>\r\n              <tr>\r\n                <th scope='col'>Nombre de menú</th>\r\n                <th scope='col'>Cantidad</th>\r\n                <th scope='col'>Estado</th>\r\n                <th scope='col'>Número de orden</th>\r\n                <th scope='col'>Número de mesa</th>\r\n                <th scope='col'>Tomar</th>\r\n                <th scope='col'>Entregar</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {this.state.order_details.map((value, index) => {\r\n                return (\r\n                  <tr key={index}>\r\n                    <td>{value.menu.name}</td>\r\n                    <td>{value.quantity}</td>\r\n                    <td>{value.status.name}</td>\r\n                    <td>{value.id}</td>\r\n                    <td>{value.table.number}</td>\r\n                    <td>\r\n                      <button\r\n                        type='submit'\r\n                        className='btn btn-primary'\r\n                        onClick={() => this.tomarPedido(value.id)}>\r\n                        <FontAwesomeIcon icon={faBellConcierge} />\r\n                        Tomar\r\n                      </button>\r\n                    </td>\r\n                    <td>\r\n                      <button\r\n                        type='submit'\r\n                        className='btn btn-success'\r\n                        onClick={() => this.entregarPedido(value.id)}>\r\n                        <FontAwesomeIcon icon={faCheckToSlot} />\r\n                        Entregar\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                )\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Pedidos"],"mappings":"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"},"metadata":{},"sourceType":"module"}